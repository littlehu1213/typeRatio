<!DOCTYPE html>
<html lang="en">

  <head>
<style>


</style>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title></title>


<!-- Custom styles for this template-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="css/sb-admin.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script> 
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script>

window.onload=function(){
  // var today=new Date();
  // var mm=today.getMonth();
  var mm=12;
  var m1="";var m2="";
  var starM=document.getElementById('starM').value;
  var endM=document.getElementById('endM').value;
  for(var i=1;i<=mm;i++){
      
      if(i!=starM){
        m1+="<option value="+i+">"+i+"</option>";
      }
      else
        m1+="<option selected=true value="+i+">"+i+"</option>";
  }

  document.getElementById('starM').innerHTML=m1;

  for(var i=1;i<=mm;i++){

      if(i!=endM){
        m2+="<option value="+i+">"+i+"</option>";
      }
      else
        m2+="<option selected=true value="+i+">"+i+"</option>";
  }


  document.getElementById('endM').innerHTML=m2;

  $(document).ready(function(){
    
      $.ajax({
        url:"piechart.php",
        dataType:"html",
        data:
        {
          starM:1,
          endM:1
        },
        success:function(data){
          $("#show").html(data);
        },
        error:function(){
          alert("error");
        }

      });

      $.ajax({
        url:"table.php",
        dataType:"html",
        data:
        {
          starM:1,
          endM:1
        },
        success:function(data){
          //alert(data);
          $("#show2").html(data);
        },
        error:function(){
          alert("error");
        }

      });
    
  });
  $(document).ready(function(){ 
    $("#toggle").click(function(){
      $("#sidebar").toggle();
     
    });
   
});

}



$(document).ready(function(){
  $("#change").change(function() {
    $.ajax({
      url:"piechart.php",
      dataType:"html",
      data:
      {
        starM:$('#starM').val(),
        endM:$('#endM').val()
      },
      success:function(data){
        $("#show").html(data);
      },
      error:function(){
        alert("error");
      }

    });
    $.ajax({
      url:"table.php",
      dataType:"html",
      data:
      {
        starM:$('#starM').val(),
        endM:$('#endM').val()
      },
      success:function(data){
        $("#show2").html(data);
      },
      error:function(){
        alert("error");
      }

    });
  });

    
});





</script>
  </head>

  
    <body>
    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">

      <a class="navbar-brand mr-1" href="index.html">myDataTable</a>

      <button class="btn btn-link btn-sm text-white order-1 order-sm-0"  href="#">
      <i class="fa fa-bars" id="toggle"></i>
      </button>   

    </nav>

    <div id="wrapper">

      <!-- Sidebar -->
   
        <ul class="sidebar navbar-nav" id="sidebar">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">
              <i class="fa fa-table"></i>
              <span>2018壽險業險種占比</span>
            </a>
          </li>
        </ul>
       

      <div id="content-wrapper">
        <div class="container-fluid">         
          <div class="card mb-3">
            <div class="card-body ">
              <div class="mr-5" id="change">
                    <select name="starM" id="starM">
            
                    </select>月到
                    <select name="endM" id="endM">
            
                    </select>月
                  </div>

            </div>
          </div>
          <!--Chart-->
          <div class="card mb-3">
            <div class="card-header">
              <i class="fa fa-pie-chart"></i>
              Pie Chart
            </div>
            <div class="card-body">
              <div id="show" width="100%" height="30">
              
              </div>
            </div>
          </div> 
          <!--TABLE-->
          <div class="card mb-3">
            <div class="card-header">
              <i class="fa fa-table"></i>
              Data Table
            </div>
            <div class="card-body">
          

                <div id="show2" width="100%" height="30">

                </div>
                              
            </div>
          </div>   
        <!-- Sticky Footer -->
        <footer>
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright © littlehu 2019</span>
            </div>
          </div>
        </footer>

    </div>
       

  </body>
<script type="text/javascript">
 
</script>
</html>
